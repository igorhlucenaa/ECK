<div class="container my-4">
  <!-- Seção de Detalhes do Cliente -->
  <div class="row mb-4">
    <div class="col-12">
      <mat-card>
        <mat-card-title class="p-3">Detalhes do Cliente</mat-card-title>
        <mat-card-content>
          <div *ngIf="client" class="d-flex flex-column gap-2">
            <h3 class="client-p">{{ client.companyName }}</h3>
            <p class="client-p"><strong>E-mail:</strong> {{ client.email }}</p>
            <p class="client-p"><strong>Setor:</strong> {{ client.sector }}</p>
            <p class="client-p">
              <strong>Telefone:</strong> {{ client.phone | phone }}
            </p>
          </div>
          <div *ngIf="!client">
            <p>Carregando detalhes do cliente...</p>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  </div>

  <!-- Seção de Usuários -->
  <div class="row">
    <div class="col-12">
      <mat-card>
        <mat-card-title class="p-3">Usuários do Cliente</mat-card-title>
        <mat-card-content>
          <div class="table-responsive">
            <table
              mat-table
              [dataSource]="users"
              class="mat-elevation-z8 w-100"
            >
              <!-- Coluna: Nome -->
              <ng-container matColumnDef="name">
                <th mat-header-cell *matHeaderCellDef>Nome</th>
                <td mat-cell *matCellDef="let user">{{ user.name }}</td>
              </ng-container>

              <!-- Coluna: E-mail -->
              <ng-container matColumnDef="email">
                <th mat-header-cell *matHeaderCellDef>E-mail</th>
                <td mat-cell *matCellDef="let user">{{ user.email }}</td>
              </ng-container>

              <!-- Coluna: Role -->
              <ng-container matColumnDef="role">
                <th mat-header-cell *matHeaderCellDef>Role</th>
                <td mat-cell *matCellDef="let user">{{ user.role }}</td>
              </ng-container>

              <!-- Adicione a Coluna: Senha -->
              <!-- <ng-container matColumnDef="password">
                <th mat-header-cell *matHeaderCellDef>Senha</th>
                <td mat-cell *matCellDef="let user">
                  <div class="d-flex align-items-center">
                    <span>{{
                      visiblePasswords[user.id] ? user.password : "****"
                    }}</span>

                    <button
                      mat-icon-button
                      (click)="togglePasswordVisibility(user.id)"
                      class="ms-2"
                      aria-label="Toggle password visibility"
                    >
                      <mat-icon>
                        {{
                          visiblePasswords[user.id]
                            ? "visibility_off"
                            : "visibility"
                        }}
                      </mat-icon>
                    </button>
                  </div>
                </td>
              </ng-container> -->

              <!-- Coluna: Ações -->
              <ng-container matColumnDef="actions">
                <th mat-header-cell *matHeaderCellDef>Ações</th>
                <td mat-cell *matCellDef="let user">
                  <button
                    mat-icon-button
                    color="warn"
                    (click)="deleteUser(user.id)"
                  >
                    <mat-icon>delete</mat-icon>
                  </button>
                </td>
              </ng-container>

              <!-- Linhas -->
              <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
            </table>
          </div>
          <div class="mt-3 text-end">
            <button
              mat-flat-button
              color="primary"
              (click)="openAddUserDialog()"
            >
              Adicionar Usuário
            </button>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
</div>
